{% extends 'base.html' %}

{% block title %}Edit Note{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
        <h1>Edit Note</h1>
        <a href="{{ url_for('view_note', id=note.id) }}" class="btn btn-secondary">Back</a>
    </div>

    <div class="card">
        <div class="card-body">
            <form method="post">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Title *</label>
                    <input type="text" name="title" value="{{ note.title }}" required 
                           style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Content *</label>
                    <textarea name="content" required rows="10"
                              style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">{{ note.content }}</textarea>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Category</label>
                    <select name="category_id" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <option value="">No Category</option>
                        {% for cat in categories %}
                        <option value="{{ cat.id }}" {% if note.category and note.category.id == cat.id %}selected{% endif %}>
                            {{ cat.name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Tags</label>
                    <input type="text" name="tags" value="{{ tags_str }}" placeholder="tag1, tag2, tag3"
                           style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    <small style="color: #666;">Separate tags with commas</small>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="checkbox" name="is_pinned" {% if note.is_pinned %}checked{% endif %} style="margin-right: 10px;">
                        Pin this note
                    </label>
                </div>

                <div style="text-align: right;">
                    <a href="{{ url_for('view_note', id=note.id) }}" class="btn btn-secondary" style="margin-right: 10px;">Cancel</a>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}